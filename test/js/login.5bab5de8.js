(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{"0c99":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"bg"},[r("div",{staticClass:"ct wrap clearfix"},[e._m(0),r("div",{staticClass:"r"},[r("div",{staticClass:"form-ct"},[r("h2",{staticClass:"form-title"},[e._v("管理后台注册")]),r("el-form",{ref:"ruleForm",staticClass:"log-form",attrs:{model:e.ruleForm,rules:e.rules}},[r("el-form-item",{attrs:{label:"",prop:"account"}},[r("el-input",{attrs:{placeholder:"请输入手机或邮箱"},model:{value:e.ruleForm.account,callback:function(t){e.$set(e.ruleForm,"account",t)},expression:"ruleForm.account"}})],1),r("el-form-item",{attrs:{label:"",prop:"password"}},[r("el-input",{attrs:{placeholder:"请输入密码"},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),r("el-form-item",{staticClass:"code-item",attrs:{label:"",prop:"code"}},[r("el-input",{attrs:{placeholder:"请输入验证码"},model:{value:e.ruleForm.code,callback:function(t){e.$set(e.ruleForm,"code",t)},expression:"ruleForm.code"}}),r("el-button",{attrs:{disabled:!e.disabledCodeBtn},on:{click:e.getCode}},[e._v(e._s(e.codeText))])],1),r("el-form-item",{staticClass:"check-item",attrs:{label:"",prop:"checked"}},[r("el-checkbox",{model:{value:e.ruleForm.checked,callback:function(t){e.$set(e.ruleForm,"checked",t)},expression:"ruleForm.checked"}}),r("span",[e._v(" 同意并愿意接受 "),r("router-link",{attrs:{to:"/agreement"}},[e._v("《服务协议》")])],1)],1),r("el-form-item",{staticClass:"submit-item"},[r("el-button",{staticClass:"log-button",attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("注册")])],1)],1),r("div",{staticClass:"link clearfix"},[r("router-link",{staticClass:"register",attrs:{to:{path:"/login"}}},[e._v("去登录")])],1)],1)])])])},a=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"l"},[s("img",{attrs:{src:r("4ffd"),alt:""}})])}],o=r("2f62"),l={name:"register",data(){return{type:null,ruleForm:{account:"",password:"",code:"",checked:!0},rules:{account:[{required:!0,message:"请输入",trigger:"change"}],password:[{required:!0,message:"请输入",trigger:"change"}],code:[{required:!0,message:"请输入",trigger:"change"}]},codeText:"获取验证码",disabledCodeBtn:!0}},created(){},mounted(){},computed:{...Object(o["d"])({userInfo:e=>e.login.userInfo})},methods:{testType(){var e=this,t=/^[1][3,4,5,6,7,8,9][0-9]{9}$/,r=/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;if(t.test(e.ruleForm.account))e.type=1;else{if(!r.test(e.ruleForm.account))return e.$message({type:"error",message:"请输入正确的账号"}),!1;e.type=2}},getCode(){var e=this;if(0==e.testType())return!1;e.$http({url:"/register/getValidCode",method:"GET",params:{AC:e.ruleForm.account,type:e.type}}).then((function(t){200==t.data.code?(e.$message({type:"success",message:"发送成功"}),e.countDown(60)):e.$message({type:"warning",message:"发送失败"})}))},countDown(e){if(0===e)return this.disabledCodeBtn=!0,void(this.codeText="获取验证码");this.disabledCodeBtn=!1,this.codeText="重新发送("+e+")",e--,setTimeout(()=>{this.countDown(e)},1e3)},submitForm(e){var t=this;return 0!=t.testType()&&(0==t.ruleForm.checked?(t.$message({type:"info",message:"请同意协议"}),!1):void t.$refs[e].validate(e=>{if(!e)return console.log("error submit!!"),!1;t.$http({url:"/register/regist",method:"POST",params:{username:t.ruleForm.account,pass:t.ruleForm.password,code:t.ruleForm.code,type:t.type}}).then((function(e){201==e.data?(t.$message({type:"success",message:e.data.msg}),t.$router.push({path:"/login"})):t.$message({type:"warning",message:e.data.msg})}))}))},...Object(o["c"])(["setUserInfo"])}},c=l,n=(r("5a66"),r("2877")),i=Object(n["a"])(c,s,a,!1,null,"16816f64",null);t["default"]=i.exports},"2eac":function(e,t,r){},"31f1":function(e,t,r){},"4ffd":function(e,t,r){e.exports=r.p+"img/logo.82b9c7a5.png"},"5a66":function(e,t,r){"use strict";var s=r("31f1"),a=r.n(s);a.a},8253:function(e,t,r){"use strict";var s=r("2eac"),a=r.n(s);a.a},dc3f:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"bg"},[r("div",{staticClass:"ct wrap clearfix"},[e._m(0),r("div",{staticClass:"r"},[r("div",{staticClass:"form-ct"},[r("h2",{staticClass:"form-title"},[e._v("管理后台登录")]),r("el-form",{ref:"ruleForm",staticClass:"log-form",attrs:{model:e.ruleForm,rules:e.rules}},[r("el-form-item",{attrs:{label:"",prop:"account"}},[r("el-input",{attrs:{placeholder:"请输入手机号/邮箱"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm("ruleForm")}},model:{value:e.ruleForm.account,callback:function(t){e.$set(e.ruleForm,"account",t)},expression:"ruleForm.account"}})],1),r("el-form-item",{attrs:{label:"",prop:"password"}},[r("el-input",{attrs:{type:"password",placeholder:"请输入密码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm("ruleForm")}},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),r("el-form-item",{staticClass:"submit-item"},[r("el-button",{staticClass:"log-button",attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("登录")])],1)],1),r("div",{staticClass:"link clearfix"},[r("router-link",{staticClass:"register",attrs:{to:{path:"/register"}}},[e._v("去注册")])],1)],1)])])])},a=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"l"},[s("img",{attrs:{src:r("4ffd"),alt:""}})])}],o=r("2f62"),l={name:"login",data(){return{type:null,ruleForm:{account:"",password:""},rules:{account:[{required:!0,message:"请输入",trigger:"change"}],password:[{required:!0,message:"请输入",trigger:"change"}]}}},created(){},mounted(){},computed:{...Object(o["d"])({userInfo:e=>e.login.userInfo})},methods:{submitForm(e){var t=this;t.$refs[e].validate(e=>{if(!e)return console.log("error submit!!"),!1;t.$http({url:"/login/login",method:"GET",params:{username:t.ruleForm.account,password:t.ruleForm.password}}).then((function(e){200==e.data.code?(localStorage.setItem("userInfo",JSON.stringify(e.data.data)),t.setUserInfo(e.data.data),t.updateRouter(e.data.data.roleSet),t.$router.push({path:"/home"})):t.$message({type:"info",message:e.data.msg})}))})},...Object(o["c"])(["setUserInfo"]),...Object(o["b"])(["updateRouter"])}},c=l,n=(r("8253"),r("2877")),i=Object(n["a"])(c,s,a,!1,null,"5e8e5d22",null);t["default"]=i.exports}}]);